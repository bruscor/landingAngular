{"ast":null,"code":"import { effect } from '@angular/core';\nimport { environment } from 'src/app/Environments/environments';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../Layouts/prices/prices.component\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../icon-text/icon-text.component\";\nconst _c0 = [\"typeformContainer\"];\nfunction MonthlyPaymentsComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9)(1, \"div\", 10)(2, \"div\", 11);\n    i0.ɵɵtext(3, \"El m\\u00E1s\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 11);\n    i0.ɵɵtext(5, \"elegido\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction MonthlyPaymentsComponent_p_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r1.calculatePrice(ctx_r1.plan.prices[ctx_r1.currency]));\n  }\n}\nconst _c1 = function (a0, a1, a2) {\n  return {\n    \"text-white\": a0,\n    \"text-gray-300\": a1,\n    \"font-bold\": a2\n  };\n};\nfunction MonthlyPaymentsComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"app-icon-text\", 13);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r4 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"element\", element_r4.text)(\"icon\", element_r4.includes ? \"fa-solid fa-check\" : \"fa-solid fa-xmark text-red-500\")(\"ngClass\", i0.ɵɵpureFunction3(3, _c1, ctx_r2.plan.isPopular && element_r4.includes, !element_r4.includes, element_r4.includes));\n  }\n}\nfunction MonthlyPaymentsComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 14, 15);\n  }\n}\nexport let MonthlyPaymentsComponent = /*#__PURE__*/(() => {\n  var _class;\n  class MonthlyPaymentsComponent {\n    constructor(prices) {\n      this.prices = prices;\n      this.isFreeTrailMode = true;\n      this.checkedInput = 0;\n      this.linkFreeTrail = environment.LINL_FREE_TRAIL;\n      effect(() => this.checkedInput = this.prices.checkedInput());\n    }\n    ngAfterViewInit() {\n      // Verificamos si los planes están cargados\n      if (this.prices.arrayPrices$.value.length > 0) {\n        this.loadTypeformScript();\n      }\n    }\n    loadTypeformScript() {\n      // cargamos el script de Typeform\n      const script = document.createElement('script');\n      script.src = '//embed.typeform.com/next/embed.js';\n      script.type = 'text/javascript';\n      script.async = true;\n      this.typeformContainer?.nativeElement.appendChild(script);\n    }\n    calculatePlan(price) {\n      if (this.checkedInput === 0) return `${this.currency}$ ${price.toLocaleString()}`;\n      const selectedType = this.prices.arrayDiscounts$.find(type => type.discount === this.checkedInput);\n      if (selectedType && selectedType.discount) {\n        const abono = price - price * selectedType?.discount / 100;\n        const formattedAbono = abono.toLocaleString();\n        return `${this.currency}$ ${formattedAbono}`; // Calcula el discount\n      } else {\n        return 0; // No hay discount si no se encuentra el tipo seleccionado o no hay precios definidos\n      }\n    }\n\n    calculatePrice(price) {\n      const selectedType = this.prices.arrayDiscounts$.find(type => type.discount === this.checkedInput);\n      if (selectedType && selectedType.discount) {\n        const abono = price - price * selectedType?.discount / 100;\n        const total = abono * selectedType.months;\n        const formattedTotal = total.toLocaleString();\n        return `${this.currency}$ ${formattedTotal} por ${selectedType.months} meses`; // Calcula el discount\n      } else {\n        return 0; // No hay discount si no se encuentra el tipo seleccionado o no hay precios definidos\n      }\n    }\n  }\n  _class = MonthlyPaymentsComponent;\n  _class.ɵfac = function MonthlyPaymentsComponent_Factory(t) {\n    return new (t || _class)(i0.ɵɵdirectiveInject(i1.PricesComponent));\n  };\n  _class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: _class,\n    selectors: [[\"app-monthly-payments\"]],\n    viewQuery: function MonthlyPaymentsComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.typeformContainer = _t.first);\n      }\n    },\n    inputs: {\n      plan: \"plan\",\n      isFreeTrailMode: \"isFreeTrailMode\",\n      currency: \"currency\"\n    },\n    decls: 13,\n    vars: 6,\n    consts: [[1, \"flex\", \"flex-col\", \"items-start\"], [\"class\", \"absolute elMasElegido top-[-5px] right-[-3px] w-[100px] h-[100px] px-4 py-2 text-verdeNucleo z-[1] overflow-hidden\", 4, \"ngIf\"], [1, \"flex\", \"items-center\", \"justify-start\", \"gap-2\"], [1, \"font-bold\", \"text-2xl\", \"md:text-4xl\"], [\"class\", \"text-left\", 4, \"ngIf\"], [1, \"font-bold\", \"text-[30px]\", \"mb-[40px]\", \"text-left\"], [1, \"flex\", \"flex-col\", \"items-start\", \"justify-center\", \"gap-2\", \"leading-3\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"primaryButton m-auto mt-[20px]\", \"data-tf-live\", \"01HPQ3AXQD7KRXG9EKFBGC368P\", 4, \"ngIf\"], [1, \"absolute\", \"elMasElegido\", \"top-[-5px]\", \"right-[-3px]\", \"w-[100px]\", \"h-[100px]\", \"px-4\", \"py-2\", \"text-verdeNucleo\", \"z-[1]\", \"overflow-hidden\"], [1, \"rotate-45\", \"shadowCustom\", \"bg-white\", \"w-[142px]\", \"absolute\", \"left-[-2px]\", \"top-[10px]\"], [1, \"text-[15px]\", \"text-center\"], [1, \"text-left\"], [1, \"text-left\", 3, \"element\", \"icon\", \"ngClass\"], [\"data-tf-live\", \"01HPQ3AXQD7KRXG9EKFBGC368P\", 1, \"primaryButton\", \"m-auto\", \"mt-[20px]\"], [\"typeformContainer\", \"\"]],\n    template: function MonthlyPaymentsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"section\", 0);\n        i0.ɵɵtemplate(1, MonthlyPaymentsComponent_div_1_Template, 6, 0, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2)(3, \"span\", 3);\n        i0.ɵɵtext(4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"span\");\n        i0.ɵɵtext(6, \"/mes\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(7, MonthlyPaymentsComponent_p_7_Template, 2, 1, \"p\", 4);\n        i0.ɵɵelementStart(8, \"h4\", 5);\n        i0.ɵɵtext(9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"div\", 6);\n        i0.ɵɵtemplate(11, MonthlyPaymentsComponent_div_11_Template, 2, 7, \"div\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(12, MonthlyPaymentsComponent_div_12_Template, 2, 0, \"div\", 8);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.plan.isPopular);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.calculatePlan(ctx.plan.prices[ctx.currency]));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.checkedInput !== 0);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.plan.namePlan);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.plan.items);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isFreeTrailMode && ctx.plan.namePlan === \"Plan Inicial\");\n      }\n    },\n    dependencies: [i2.NgClass, i2.NgForOf, i2.NgIf, i3.IconTextComponent],\n    styles: [\".elMasElegido[_ngcontent-%COMP%]:before, .elMasElegido[_ngcontent-%COMP%]:after{content:\\\"\\\";position:absolute;width:6px;height:6px;background-color:#fff;transition:all .1s ease-in;border-radius:20px}.offscreen[_ngcontent-%COMP%]{position:absolute;left:-9999px}\"]\n  });\n  return MonthlyPaymentsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}